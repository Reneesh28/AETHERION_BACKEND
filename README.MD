# ğŸ§  AETHERION

## ğŸš€ Real-Time Market Regime Detection & Strategy Switching Engine

---

# ğŸ† PROJECT STATUS

### âœ… Day 1 â€” System Bootstrap

### âœ… Day 2 â€” Market Data Simulator

### âœ… Day 3 â€” Feature Engineering Layer

### âœ… Day 4 â€” HMM Regime Model Training

### âœ… Day 5 â€” Live Regime Detection + WebSocket Broadcasting

AETHERION backend now runs a fully asynchronous multi-market ingestion engine with live ML-based regime detection and WebSocket broadcasting.

---

# ğŸ§± FINALIZED TECH STACK

| Layer            | Technology      | Purpose                      |
| ---------------- | --------------- | ---------------------------- |
| Core Platform    | Django          | Auth, users, risk controls   |
| Market Ingestion | FastAPI         | Async ingestion + WebSockets |
| ML Engines       | Flask           | Regime detection             |
| Databases        | MySQL + MongoDB | Structured + tick storage    |
| Real-Time        | WebSockets      | Live streaming               |
| Async            | asyncio         | Low-latency ingestion        |

---

# ğŸ— SYSTEM ARCHITECTURE

```
Django Core (Port 8000)     â†’ MySQL (3306)
FastAPI Market (Port 8001)  â†’ MongoDB (27017)
Flask Regime (Port 8002)    â†’ HMM Model Service

FastAPI â†’ Flask (REST ML inference)
FastAPI â†’ MySQL (Regime storage)
FastAPI â†’ WebSocket (Live streaming)
```

---

# ğŸ“‚ PROJECT STRUCTURE

```
AETHERION_BACKEND/
â”‚
â”œâ”€â”€ django_core/        # Django + MySQL (Control Tower)
â”œâ”€â”€ fastapi_market/     # FastAPI + MongoDB (Async Market Engine)
â”œâ”€â”€ flask_regime/       # Flask (HMM Regime Engine)
â”œâ”€â”€ shared/             # Shared utilities
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ .gitignore
â””â”€â”€ README.md
```

---

# âš™ï¸ ENVIRONMENT SETUP

## 1ï¸âƒ£ Create Virtual Environment

```bash
python -m venv venv
venv\Scripts\activate
```

## 2ï¸âƒ£ Install Dependencies

```bash
pip install -r requirements.txt
```

---

# ğŸ—„ DATABASE CONFIGURATION

## ğŸŸ¦ MySQL

### Create Databases

```sql
CREATE DATABASE aetherion_core;
CREATE DATABASE aetherion;
```

### Regime Table

```sql
CREATE TABLE regime_state (
    id INT AUTO_INCREMENT PRIMARY KEY,
    market VARCHAR(50) NOT NULL,
    symbol VARCHAR(50) NOT NULL,
    timeframe VARCHAR(10) NOT NULL,
    regime VARCHAR(20) NOT NULL,
    confidence FLOAT NOT NULL,
    state INT NOT NULL,
    detected_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

### Indexes

```sql
CREATE INDEX idx_market_symbol_time
ON regime_state (market, symbol, detected_at);

CREATE INDEX idx_regime
ON regime_state (regime);
```

---

## ğŸŸ© MongoDB

```
mongodb://localhost:27017
```

### Collections

```
market_ticks
market_candles
market_features
crypto_orderbook
us_orderbook
nse_orderbook
```

---

# â–¶ RUNNING THE SERVICES

## ğŸŸ¦ Django Core (Port 8000)

```bash
cd django_core
python manage.py runserver 8000
```

Base URL:

```
http://127.0.0.1:8000/
```

---

## ğŸŸ© FastAPI Market (Port 8001)

```bash
uvicorn fastapi_market.main:app --port 8001 --reload
```

### Swagger Docs

```
http://127.0.0.1:8001/docs
```

### OpenAPI JSON

```
http://127.0.0.1:8001/openapi.json
```

---

## ğŸŸ§ Flask Regime (Port 8002)

```bash
python -m flask_regime.app
```

Base URL:

```
http://127.0.0.1:8002/
```

---

# ğŸ”„ INTER-SERVICE COMMUNICATION

### FastAPI â†’ Flask

```
POST http://127.0.0.1:8002/detect_regime
```

### Sample Response

```json
{
  "market": "CRYPTO",
  "symbol": "BTCUSDT",
  "regime": "Bull",
  "confidence": 0.87,
  "state": 2
}
```

---

# ğŸ“¡ REST ENDPOINTS (FastAPI - Port 8001)

```
GET  http://127.0.0.1:8001/api/market/snapshot/{market}
GET  http://127.0.0.1:8001/api/market/trades/{market}
GET  http://127.0.0.1:8001/api/market/orderbook/{market}
GET  http://127.0.0.1:8001/api/market/features/{market}
GET  http://127.0.0.1:8001/api/market/status
```

---

# ğŸ”Œ WEBSOCKET ENDPOINTS

## ğŸŸ¢ Live Market Stream

```
ws://127.0.0.1:8001/ws/market
```

Streams:

* Tick data
* OHLC candles
* Volume updates

---

## ğŸŸ£ Live Regime Stream

```
ws://127.0.0.1:8001/ws/regime
```

Example Payload:

```json
{
  "market": "CRYPTO",
  "symbol": "BTCUSDT",
  "regime": "Sideways",
  "confidence": 0.76,
  "state": 1,
  "timestamp": "2026-02-28T18:10:00Z"
}
```

---

# ğŸ“Š DAY 2 â€” MARKET SIMULATOR (COMPLETE)

* Random-walk price generator
* Volume simulation
* 1-second tick interval
* MongoDB persistence
* 10-second OHLC aggregation
* WebSocket streaming

---

# ğŸ§  DAY 3 â€” FEATURE ENGINE (COMPLETE)

Computed in real time:

* Log returns
* Rolling volatility
* ATR
* Volume delta
* Spread estimation

Stored in:

```
market_features
```

---

# ğŸ¤– DAY 4 â€” HMM REGIME MODEL (COMPLETE)

* Gaussian Hidden Markov Model
* 4 States â†’ Bull / Bear / Sideways / Crisis
* Feature scaling (StandardScaler)
* Automatic state mapping
* Model persistence (joblib)

Saved Artifacts:

```
crypto_1m_hmm.pkl
crypto_1m_scaler.pkl
crypto_1m_mapping.pkl
```

---

# ğŸš€ DAY 5 â€” LIVE REGIME ENGINE (COMPLETE)

## Polling System

FastAPI polls Flask every 10 seconds:

* Applies confidence threshold
* Inserts only on regime change
* Stores in MySQL
* Broadcasts via WebSocket

---

# ğŸ” REAL-TIME FLOW

```
Market Data
   â†“
Feature Engineering
   â†“
HMM Regime Detection
   â†“
Confidence Filter
   â†“
MySQL Persistence
   â†“
WebSocket Broadcast
```

---

# ğŸ† WHAT HAS BEEN ACHIEVED

âœ” Microservice backend separation
âœ” Async multi-market ingestion
âœ” Mongo feature engineering layer
âœ” HMM-based regime classification
âœ” Confidence-filtered regime transitions
âœ” MySQL historical regime storage
âœ” WebSocket real-time regime streaming
âœ” Production-style polling architecture

---

# ğŸ”® NEXT PHASE

* Strategy Switching Engine
* Liquidity Stress Simulator
* Portfolio Risk Engine
* Trade Surveillance System

---

# ğŸ§  CURRENT SYSTEM STATE

AETHERION Backend

Day 1: COMPLETE
Day 2: COMPLETE
Day 3: COMPLETE
Day 4: COMPLETE
Day 5: COMPLETE

Live multi-market ingestion + ML regime detection operational.
