# ğŸ§  AETHERION

## ğŸš€ Real-Time Market Regime Detection & Strategy Switching Engine

---

# ğŸ“Œ PROJECT OVERVIEW

AETHERION is a production-style microservice backend designed to:

â€¢ Ingest multi-market data in real time
â€¢ Engineer features asynchronously
â€¢ Detect market regimes using ML (HMM)
â€¢ Persist regime transitions
â€¢ Stream live updates via WebSockets

This README reflects the **actual Day-to-Day Implementation Plan (Day 1 â†’ Day 5)** and the completed integration flow after each phase.

---

# ğŸ§± FINAL TECH STACK (LOCKED)

| Layer         | Technology      | Purpose                              |
| ------------- | --------------- | ------------------------------------ |
| Core Platform | Django          | Control layer, auth, risk, DB models |
| Market Engine | FastAPI         | Async ingestion + WebSockets         |
| ML Engine     | Flask           | Regime detection (HMM)               |
| Databases     | MySQL + MongoDB | Structured + tick storage            |
| Real-Time     | WebSockets      | Live streaming                       |
| Async Runtime | asyncio         | Low latency processing               |

---

# ğŸ— FINAL ARCHITECTURE

```
Django Core (8000) â†’ MySQL
FastAPI Market (8001) â†’ MongoDB
Flask Regime ML (8002)

FastAPI â†’ Flask (ML inference)
FastAPI â†’ MySQL (Regime persistence)
FastAPI â†’ WebSocket (Live broadcast)
```

---

# ğŸ“‚ PROJECT STRUCTURE

```
AETHERION_BACKEND/
â”‚
â”œâ”€â”€ django_core/        # Django + MySQL (Control Tower)
â”œâ”€â”€ fastapi_market/     # FastAPI + MongoDB (Async Market Engine)
â”œâ”€â”€ flask_regime/       # Flask (HMM Regime Engine)
â”œâ”€â”€ shared/             # Shared utilities
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ .gitignore
â””â”€â”€ README.md
```

---

# ğŸ—“ DAYâ€‘TOâ€‘DAY IMPLEMENTATION BREAKDOWN

---

# âœ… DAY 1 â€” SYSTEM BOOTSTRAP

### Objectives

â€¢ Setup microservice separation
â€¢ Configure Django + MySQL
â€¢ Configure FastAPI service
â€¢ Configure Flask ML service
â€¢ Establish database connectivity

### Completed

âœ” Django running on `http://127.0.0.1:8000/`
âœ” FastAPI running on `http://127.0.0.1:8001/`
âœ” Flask ML service running on `http://127.0.0.1:8002/`
âœ” MySQL connected
âœ” MongoDB connected

System foundation complete.

---

# âœ… DAY 2 â€” MARKET DATA SIMULATOR

### Objectives

â€¢ Build async market generator
â€¢ Generate random-walk price
â€¢ Simulate volume
â€¢ Store ticks in MongoDB
â€¢ Broadcast via WebSocket

### Implemented

âœ” 1-second tick engine
âœ” MongoDB collection: `market_ticks`
âœ” OHLC aggregation (10s)
âœ” WebSocket stream

### WebSocket

```
ws://127.0.0.1:8001/ws/market
```

### Integration After Day 2

Market data â†’ MongoDB â†’ WebSocket

Live streaming operational.

---

# âœ… DAY 3 â€” FEATURE ENGINE

### Objectives

â€¢ Compute rolling features
â€¢ Store features in MongoDB
â€¢ Maintain async processing loop

### Implemented Features

â€¢ Log returns
â€¢ Rolling volatility
â€¢ ATR
â€¢ Volume delta
â€¢ Spread estimation

### Storage

MongoDB collection:

```
market_features
```

### Integration After Day 3

Market Data â†’ Feature Engine â†’ MongoDB â†’ WebSocket

Feature layer fully integrated.

---

# âœ… DAY 4 â€” HMM REGIME MODEL TRAINING

### Objectives

â€¢ Train Gaussian Hidden Markov Model
â€¢ Scale features
â€¢ Map hidden states to market regimes
â€¢ Persist model artifacts

### Model Design

â€¢ 4 Hidden States
â€¢ Bull
â€¢ Bear
â€¢ Sideways
â€¢ Crisis

### Saved Artifacts

```
crypto_1m_hmm.pkl
crypto_1m_scaler.pkl
crypto_1m_mapping.pkl
```

### Flask ML Endpoint

```
POST http://127.0.0.1:8002/detect_regime
```

### Integration After Day 4

Feature Engine â†’ Flask ML â†’ Regime Prediction

ML inference service operational.

---

# âœ… DAY 5 â€” LIVE REGIME ENGINE + PERSISTENCE

### Objectives

â€¢ Poll Flask every 10 seconds
â€¢ Apply confidence filter
â€¢ Insert only on regime change
â€¢ Store regime history in MySQL
â€¢ Broadcast regime updates

### MySQL Table

```
regime_state
```

Fields:

â€¢ market
â€¢ symbol
â€¢ timeframe
â€¢ regime
â€¢ confidence
â€¢ state
â€¢ detected_at

### WebSocket

```
ws://127.0.0.1:8001/ws/regime
```

### Example Payload

```json
{
  "market": "CRYPTO",
  "symbol": "BTCUSDT",
  "regime": "Sideways",
  "confidence": 0.76,
  "state": 1,
  "timestamp": "2026-02-28T18:10:00Z"
}
```

### Integration After Day 5

Market Data
â†’ Feature Engine
â†’ HMM Regime Detection
â†’ Confidence Filter
â†’ MySQL Persistence
â†’ WebSocket Broadcast

Full ML-driven real-time regime system operational.

---

# ğŸ“¡ FASTAPI REST ENDPOINTS

```
GET  http://127.0.0.1:8001/api/market/snapshot/{market}
GET  http://127.0.0.1:8001/api/market/trades/{market}
GET  http://127.0.0.1:8001/api/market/orderbook/{market}
GET  http://127.0.0.1:8001/api/market/features/{market}
GET  http://127.0.0.1:8001/api/market/status
```

Swagger Docs:

```
http://127.0.0.1:8001/docs
```

---

# â–¶ RUNNING THE SERVICES

## Django Core

```
cd django_core
python manage.py runserver 8000
```

## FastAPI Market

```
uvicorn fastapi_market.main:app --port 8001 --reload
```

## Flask Regime ML

```
python -m flask_regime.app
```

---

# ğŸ† CURRENT SYSTEM CAPABILITIES

âœ” Microservice separation
âœ” Async multi-market ingestion
âœ” Real-time feature engineering
âœ” ML-based regime classification
âœ” Confidence-filtered regime transitions
âœ” MySQL regime history
âœ” Live WebSocket broadcasting
âœ” Production-style polling architecture

---

# ğŸš€ NEXT IMPLEMENTATION PHASE

Following completion of Regime Detection:

â€¢ Strategy Switching Engine
â€¢ Risk Layer Integration
â€¢ Execution Engine
â€¢ Surveillance System

---

# ğŸ“Œ PROJECT STATE

Day 1: COMPLETE
Day 2: COMPLETE
Day 3: COMPLETE
Day 4: COMPLETE
Day 5: COMPLETE

AETHERION backend is fully operational with live ML regime detection.
